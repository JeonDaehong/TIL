---
title: Important Study - Concurrency issues And Lock
author: Daehong
date: 2023-11-29
category: Jekyll
layout: post
mermaid: true
---

<hr>

### 스레드 동기화 & 동시성 이슈 문제들
 - **레이스 컨디션 ( Race Condition )**
	* 두 개 이상의 스레드가 동시에 접근하여 결과값에 영향을 줄 수 있는 상태 흔히 말하는 동시성 문제라고 할 수 있다.


 - **교착 상태 ( Deadlock )**
	* 공유 자원에 대한 요구가 엉켜서 자원 관리를 잘못하여 프로세스나 스레드가 자원의 락을 획득하기 위해 무한 대기 하는 것
	
	
 - **기아 상태 ( Starvation )**
	* 스레드들에게 우선 순위를 부여하여 공유 자원에 접근할 때, 우선순위가 낮은 스레드가 소외되어 아무일도 하지 못하는 상태
	
	
 - **라이브락 ( Livelock )**
	* 스레드들이 동시에 실행되면서 락의 해제와 획득을 반복적으로 하면서 정상적으로 동작하는 것처럼 보이지만 사실상 아무것도 못하고 무한 동작중인 상황

<br>
<br>

### 가시성, 동시성, 그리고 원자성
 - **가시성 ( Visibility )**
	- CPU 안에는 CPU cache 라는 영역이 있다.
	
	- 우리가 선언한 변수의 값은 CPU cache를 거쳐서 메인메모리에 올라가고 불러온다.
	
	- 이는 CPU가 메인 메모리에서 값을 읽고 쓰는 시간을 아끼기 위해서이다.
	
	- 그런데, CPU cache 에서 메인 메모리로 값이 언제 옮겨갈지 모르는다는 것이다.
	
	- 그러한 이유로 하나의 스레드에서 변경한 변수의 값이 다른 스레드에서 보이지 않는 것을 **'가시성 이슈'** 라고 한다.
 
 <br>
 
 - **동시성 ( Concurrency )**
	- 하나의 코어에 여러개의 스레드가 번갈아가며 작업을 실행하는 성질을 뜻한다.
	
	- 동시에 하는 것처럼 보일 수 있지만, 사실은 동시에 작업하는 것처럼 보일만큼 빠르게 작업을 번갈아가며 진행한다.
	
	- 그 때 일어나는 일관성 문제나, 위의 레이스컨디션, 데드락등의 문제가 일어나는 것을 **'동시성 이슈'** 라고 한다.

 <br>
 
 - **원자성 ( Atomicity )**
	- 더 이상 쪼개질 수 없는 성질.
	
	- 원자성을 가지는 작업은 실행되어 진행되다가 종료되지 않는 한, 중간에서 멈출 수 없음. 
	
	- 그리고 해당 명령을 수행 할 때 다른 곳에서 접근할 수 없음.
	
<br>
<br>

### 가시성, 동시성 이슈를 해결하는 방법
 - **Java 에서는 Volatile 과 Synchronized 그리고 Atomic 이렇게 세 가지를 지원한다.**

 - **Volatile**
	- volatile 은 변수에 설정해주는 것인데, 해당 변수에 대해 CPU cache를 사용하는 것이 아닌 메인 메모리에서 바로 올리고 내릴 수 있게 하여, 가시성을 보장해준다.

	- 그러나 원자성을 보장하지 않기 때문에 동시성 이슈는 해결하지 못한다.

<br>
 
 - **Synchronized**
 
<br>
 
 - **Atomic**

 
<br>
<br>
<br>
<br>
<br>